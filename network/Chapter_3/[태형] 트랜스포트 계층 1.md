## 1. 트랜스포트 계층 서비스 및 개요

- 트랜스포트 계층 프로토콜 : 애플리케이션 프로세스들 간의 논리적 통신 제공
    - 논리적 통신(Logical Communication) : 프로세스들이 동작하는 호스트들이 직접 연결된 것처럼 보이는 것
    - 실제로 호스트들은 수 많은 라우터와 링크를 통해 연결될 수 있음
- 트랜스포트 계층 프로토콜은 종단 시스템에서 구현됨
- 애플리케이션 계층 패킷인 `메시지`를 4계층 `세그먼트(segment)`로 변환
    - 애플리케이션 메시지를 세그먼트로 변환하기 위해 작은 조각으로 분할
    - 각각의 조각에 트랜스포트 계층 헤더를 추가
- 애플리케이션은 두 개 이상의 트랜스포트 계층 프로토콜을 사용 가능
    - 인터넷은 TCP와 UDP를 사용

### 1.1 트랜스포트 계층과 네트워크 계층 사이의 관계
#### 1) 트랜스포트 계층 프로토콜과 네트워크 계층 프로토콜의 비교
트랜스포트 계층은 네트워크 계층 바로 상위에 존재한다
- 트랜스포트 계층 프로토콜 : 프로세스들 사이의 논리적 통신을 제공
- 네트워크 계층 프로토콜 : 호스트들 사이의 논리적 통신을 제공

#### 2) 트랜스포트 계층 프로토콜의 역할
- 트랜스포트 계층 프로토콜은 애플리케이션에서 네트워크 경계까지 메시지를 운반
- 네트워크 계층에서 애플리케이션 프로세스로 메시지를 운반
- 트랜스포트 계층 프로토콜은 패킷이 네트워크에서 어떻게 이동하는지 알 수 없음
- 중간 라우터는 트랜스포트 계층에 대한 정보를 알 수 없음 -> 캡슐화
- 트랜스포트 계층은 네트워크 계층 프로토콜의 제약을 받음
    - 하위 계층에서 지연 보장이나 대역폭 보장을 제공할 수 없다면, 트랜스포트 계층 프로토콜은 프로세스의 메시지에 대해 지연 보장이나 대역폭 보장을 할 수 없음

### 1.2 인터넷 트랜스포트 계층의 개요
- TCP/IP 네트워크는 애플리케이션 계층에게 두 가지 프로토콜을 제공 -> TCP, UDP
    - 개발자는 소켓을 생성할 때 TCP와 UDP 중 하나를 선택해야 함
- 세그먼트(segment) : 트랜스포트 계층 패킷

##### 1) IP는 비신뢰적인 서비스
- IP는 호스트 간에 `최선형 전달 서비스(best-effort delivery service)`를 제공
    - 이는 호스트들 간에 세그먼트를 전달하기 위해 최선을 다하지만, `어느 보장도 하지 않음을 의미`
    - 즉, IP는 `비신뢰적인 서비스(unreliable service)`로, 데이터의 무결성을 보장하지 않음

##### 2) UDP & TCP의 기능
- 종단 시스템 사이의 IP 전달 서비스 -> 종단의 프로세스 간의 전달 서비스로 확장
    - 호스트 <-> 호스트에서 프로세스 <-> 프로세스로 통신 범위를 확장
    - 이를 트랜스포트 다중화(transport multiplexing)와 역다중화(demultiplexing)라 한다
- 헤더에 오류 검출 필드를 포함하므로 무결성 검사를 제공

##### 3) UDP의 기능
- 다중화 & 역다중화 (multiplexing & demultiplexing) : 프로세스로의 통신 범위 확장
- 무결성 검사 : 헤더에 오류 검출 필드를 포함하여 무결성 검사를 진행
- 비신뢰적 서비스 제공
    - 데이터가 손상되지 않고 목적지 프로세스에 도착하는 것을 보장하지 않음
- 혼잡 제어를 제공하지 않음
    - TCP와 달리 트래픽 조절을 하지 않는다
    - 애플리케이션이 허용하는 한 어떤 속도로도 전송 가능

##### 4) TCP
- 다중화 & 역다중화 (multiplexing & demultiplexing) : 프로세스로의 통신 범위 확장
- 무결성 검사 : 헤더에 오류 검출 필드를 포함하여 무결성 검사를 진행
- 신뢰적 서비스 제공
    - `흐름제어`, `순서번호`, `확인응답`, `타이머` -> 데이터가 순서대로 정확히 전달하는 것을 보장
    - IP의 비신뢰적인 서비스를 신뢰적인 데이터 전송 서비스로 만들어줌
- 혼잡 제어 (congestion control) : 네트워크 전체를 위한 일반 서비스
    - TCP 연결이 과도한 양의 트래픽으로 네트워크 상의 스위치와 링크의 과부하를 방지
    - 혼잡한 네트워크 링크에서 각 TCP 연결이 링크의 대역폭을 공평하게 공유하여 통과하게 함
        - <b><u>송신측의 TCP가 네트워크에 보낼 수 있는 트래픽을 조절</u></b>
- 신뢰적인 데이터 전달 & 혼잡 제어를 제공하는만큼 프로토콜이 복잡함